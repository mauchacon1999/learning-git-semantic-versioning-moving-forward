#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üîç Pre-push hook ejecut√°ndose..."

# Verificar que no haya cambios sin commitear
if [ -n "$(git status --porcelain)" ]; then
    echo "‚ùå Error: Hay cambios sin commitear"
    echo "Por favor, haz commit de tus cambios antes de hacer push"
    exit 1
fi

# Verificar que est√©s en una rama v√°lida
CURRENT_BRANCH=$(git branch --show-current)
if [ "$CURRENT_BRANCH" = "main" ] || [ "$CURRENT_BRANCH" = "master" ]; then
    echo "‚ö†Ô∏è  Advertencia: Est√°s haciendo push a $CURRENT_BRANCH"
    echo "¬øEst√°s seguro de que quieres continuar? (y/N)"
    read -r response
    if [ "$response" != "y" ] && [ "$response" != "Y" ]; then
        echo "Push cancelado"
        exit 1
    fi
fi

echo "‚úÖ Pre-push validaciones completadas"
