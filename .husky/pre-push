#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🚀 Pre-push hook triggered"
echo "📍 Current branch: $(git branch --show-current)"

# Run GitFlow automation based on branch type
CURRENT_BRANCH=$(git branch --show-current)

if [[ "$CURRENT_BRANCH" == feature/* ]] || [[ "$CURRENT_BRANCH" == fix/* ]] || [[ "$CURRENT_BRANCH" == update/* ]]; then
    echo "🔄 Feature branch - running feature automation"
    yarn gitflow:feature
elif [[ "$CURRENT_BRANCH" == release/* ]]; then
    echo "🔄 Release branch - running release automation"
    yarn gitflow:release
elif [[ "$CURRENT_BRANCH" == hotfix/* ]]; then
    echo "🔄 Hotfix branch - running hotfix automation"
    yarn gitflow:hotfix
fi
